<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>I love yixuan</title>
    <link rel="icon" href="images/heart.ico" type="image/x-icon" />
    <link href="./css/default.css" type="text/css" rel="stylesheet">
    <!-- <link href="css/bg.css" type="text/css" rel="stylesheet"> -->
    <link href="./css/ticket.css" type="text/css" rel="stylesheet">
    <script type="text/javascript" src="./js/jquery.js"></script>
    <script type="text/javascript" src="./js/garden.js"></script>
    <!-- <script type="text/javascript" src="./js/makesnake.js"></script> -->
    <script type="text/javascript" src="./js/snowstorm.js"></script>
    <script type="text/javascript" src="./js/roundabout.js"></script>
		<script type="text/javascript" src="./js/roundabout_shapes.js"></script>
		<script type="text/javascript" src="./js/gallery_init.js"></script>
    <script type="text/javascript" src="./js/move.js"></script>
    <script type="text/javascript" src="./Love_files/jscex.min.js"></script>
    <script type="text/javascript" src="./Love_files/jscex-parser.js"></script>
    <script type="text/javascript" src="./Love_files/jscex-jit.js"></script>
    <script type="text/javascript" src="./Love_files/jscex-builderbase.min.js"></script>
    <script type="text/javascript" src="./Love_files/jscex-async.min.js"></script>
    <script type="text/javascript" src="./Love_files/jscex-async-powerpack.min.js"></script>
    <script type="text/javascript" src="./Love_files/love.js" charset="utf-8"></script>
  </head>
  <body>

    <div id="ticket">
      <div class="ticket-tip">// 那张重要的车票也许会迟到，但从不会缺席......</div>
      <div class="ticket">
        <div class="row">
          <div class="ticket-number">Z105H071839</div>
          <div class="arrow"></div>
          <div class="check-in">检票口：候车室6</div>
        </div>
        <div class="row">
          <div class="start">
            <div>
              <span class="station-name">上 海</span><span class="station"> 站</span>
            </div>
            <div>Shanghai</div>
          </div>
          <div class="train">
            <div class="train-number">D956</div>
          </div>
          <div class="end">
            <div>
              <span class="station-name">宜昌东</span><span class="station"> 站</span>
            </div>
            <div>Yichangdong</div>
          </div>
        </div>
        <div class="row row-wrapper">
          <div class="time"><span class="num">2020</span><span class="unit">年</span><span class="num">05</span><span class="unit">月</span><span class="num">01</span><span class="unit">日</span><span class="num">09:30</span><span class="unit">开</span></div>
          <div class="seat"><span class="num">04</span><span class="unit">车</span><span class="num">14A</span><span class="unit">号</span></div>
        </div>
        <div class="row row-wrapper">
          <div class="money"><span class="num">￥ 423.0</span><span class="unit">元</span></div>
          <div class="channel">网</div>
          <div class="seat-level">二等座</div>
        </div>
        <div class="tip">限乘当日当次车</div>
        <div class="row">
          <div class="info">
            <div class="id">4211251990****401X 南潮</div>
            <div class="tip-box">
              <div>欢度五一 祝福祖国</div>
              <div>中国铁路祝您旅途愉快</div>
            </div>
          </div>
          <div class="qr-code-wrapper"><img src="images/qrcode.png" alt="" class="qr-code"></div>
        </div>
        <div class="footer"><span>32270320221225P095659</span><span class="txt">沪</span><span class="txt">售</span></div>
      </div>
    </div>
    

    <div id="mainDiv">
      <div id="content">
        <div id="code">
          <span class="comments">// 第一次和你聊天</span><br><br>
          <span class="comments-gray">/***************************************************</span><br>
          <span class="comments-gray">@Time: 2020/04/06 20:41</span><br>
          <span class="comments-gray">@place: zhihu.com</span><br>
          <span class="comments-gray">****************************************************/</span><br>
          <span class="string"><span class='name'>nanc: </span>22好年轻，30岁程序员了解一下吗</span><br>
          <span class="string"><span class='name'>一茶：</span>嗯你好呀🤣 不比我小就好</span><br><br><br><br>

          <span class="comments">// 第一次和你牵手</span><br><br>
          <span class="comments-gray">/***************************************************</span><br>
          <span class="comments-gray">@Time: 2020/05/03 night</span><br>
          <span class="comments-gray">@place: cafe</span><br>
          <span class="comments-gray">****************************************************/</span><br>
          <span class="string">剧中男女主角的牵手给了我勇气（脸红つ﹏⊂）</span><br>
          <span class="string">你的手好软，握着好舒服，我舍不得松开</span><br><br><br><br>

          <span class="comments">// 第一次抱你，吻你，表白</span><br><br>
          <span class="comments-gray">/***************************************************</span><br>
          <span class="comments-gray">@Time: 2020/05/04 night</span><br>
          <span class="comments-gray">@place: 沿江大道</span><br>
          <span class="comments-gray">****************************************************/</span><br>
          <span class="string">牵着你的手往回走着，突然想一把抱住你，并忍不住吻了你</span><br>
          <span class="string">吻完才想起刚吃完小龙虾，一嘴的油，尴尬~</span><br>
          <span class="string">我结结巴巴地对你说：艺璇，我喜欢你！你愣了一下，害羞又调皮地问我：真的吗？</span><br>
          <span class="string">那一刻，真的很美好，我心里乐开了花哈哈哈</span><br><br><br><br>

          <span class="comments">// 第一次被你吻</span><br><br>
          <span class="comments-gray">/***************************************************</span><br>
          <span class="comments-gray">@Time: 2020/05/05 morning</span><br>
          <span class="comments-gray">@place: 宜昌东站</span><br>
          <span class="comments-gray">****************************************************/</span><br>
          <span class="string">在我进站前，你看我东张西望，不知所措。</span><br>
          <span class="string">可我真的没想到，你的嘴唇贴了上来，我激动地把你拥在怀里，回味很久……</span><br><br><br><br>

          <span class="comments">// 第一次……</span><br><br>
          <span class="comments-gray">/***************************************************</span><br>
          <span class="comments-gray">@Time: anytime</span><br>
          <span class="comments-gray">@place: everywhere</span><br>
          <span class="comments-gray">@todo: everything</span><br>
          <span class="comments-gray">****************************************************/</span><br>
          <span class="string">有你在的每一天都是新鲜的，想和你一起去所有的地方，体验任何的事情。</span><br>
          <span class="string">和你看尽一生繁华，看淡一世浮华，看清人间冷暖。</span><br><br><br><br>


          <!-- <span class="comments">// We've known each other for ...</span><br><br>
          <span id="clock"></span> -->

        </div>
      </div>
    </div>

    <div id="container">
			<ul id="myRoundabout" class="roundabout-holder" style="padding: 0px; position: relative; z-index: 100;">
		  	<li class="roundabout-moveable-item roundabout-in-focus" current-scale="1.0000" style="position: absolute; left: 122px; top: 87px; width: 350px; height: 222px; opacity: 1; z-index: 400; font-size: 16px;"><img src="./images/pictures/love1.jpeg" alt=""></li>
        <li class="roundabout-moveable-item" current-scale="0.7927" style="position: absolute; left: -0.4px; top: 110px; width: 277.445px; height: 175.9794px; opacity: 1; z-index: 296; font-size: 12.68px;"><img src="./images/pictures/love2.jpeg" alt=""></li>
        <li class="roundabout-moveable-item" current-scale="0.4573" style="position: absolute; left: 473.8px; top: 147.2px; width: 160.055px; height: 101.5206px; opacity: 1; z-index: 129; font-size: 7.32px;"><img src="images/pictures/love3.jpeg" alt=""></li>
        <li class="roundabout-moveable-item" current-scale="0.4573" style="position: absolute; left: -39.8px; top: 147.2px; width: 160.055px; height: 101.5206px; opacity: 1; z-index: 129; font-size: 7.32px;"><img src="images/pictures/love4.jpeg" alt=""></li>
        <li class="roundabout-moveable-item" current-scale="0.7927" style="position: absolute; left: 317px; top: 110px; width: 277.445px; height: 175.9794px; opacity: 1; z-index: 296; font-size: 12.68px;"><img src="images/pictures/love5.jpeg" alt=""></li>
		  </ul>
    </div>
    
    <div id="main" style="visibility: hidden;">
      <div id="wrap">
        <canvas id="canvas" width="1100" height="680"></canvas>
      </div>
    </div>

    <div id="clock-wrapper" style="display: none;">
      <div class="comments">// We've known each other for ...</div>
      <span id="clock"></span>
    </div>

    <div id="loveHeart">
      <canvas id="garden" width="670" height="625"></canvas>
    </div>

    <script>
       document.write('<audio loop autoplay="autoplay"><source src="images/sweet.mp3?'+Math.random()+'" type="audio/mp3" /></audio>');
    </script>
   
    

    <script>
      (function(){
          var canvas = $('#canvas');
  
          var width = canvas.width();
          var height = canvas.height();
          
          canvas.attr("width", width);
          canvas.attr("height", height);
  
          var opts = {
              seed: {
                  x: width / 2 - 20,
                  color: "rgb(190, 26, 37)",
                  scale: 2
              },
              branch: [
                  [535, 680, 570, 250, 500, 200, 30, 100, [
                      [540, 500, 455, 417, 340, 400, 13, 100, [
                          [450, 435, 434, 430, 394, 395, 2, 40]
                      ]],
                      [550, 445, 600, 356, 680, 345, 12, 100, [
                          [578, 400, 648, 409, 661, 426, 3, 80]
                      ]],
                      [539, 281, 537, 248, 534, 217, 3, 40],
                      [546, 397, 413, 247, 328, 244, 9, 80, [
                          [427, 286, 383, 253, 371, 205, 2, 40],
                          [498, 345, 435, 315, 395, 330, 4, 60]
                      ]],
                      [546, 357, 608, 252, 678, 221, 6, 100, [
                          [590, 293, 646, 277, 648, 271, 2, 80]
                      ]]
                  ]] 
              ],
              bloom: {
                  num: 700,
                  width: 1080,
                  height: 650,
              },
              footer: {
                  width: 600,
                  height: 5,
                  speed: 10,
              }
          }
  
          var tree = new Tree(canvas[0], width, height, opts);
          var seed = tree.seed;
          var foot = tree.footer;
          var hold = 1;
  
          canvas.click(function(e) {
              var offset = canvas.offset(), x, y;
              x = e.pageX - offset.left;
              y = e.pageY - offset.top;
              
              window.scrollTo(0,263)
              // setTimeout(function(){
              //   $("#clock-wrapper").fadeIn(500);
              // }, 5000)
              if (seed.hover(x, y)) {
                  hold = 0; 
                  canvas.unbind("click");
                  canvas.unbind("mousemove");
                  canvas.removeClass('hand');
              }
          }).mousemove(function(e){
              var offset = canvas.offset(), x, y;
              x = e.pageX - offset.left;
              y = e.pageY - offset.top;
              canvas.toggleClass('hand', seed.hover(x, y));
          });
  
          var seedAnimate = eval(Jscex.compile("async", function () {
              seed.draw();
              while (hold) {
                  $await(Jscex.Async.sleep(10));
              }
              while (seed.canScale()) {
                  seed.scale(0.95);
                  $await(Jscex.Async.sleep(10));
              }
              while (seed.canMove()) {
                  seed.move(0, 2);
                  foot.draw();
                  $await(Jscex.Async.sleep(10));
              }
          }));
  
          var growAnimate = eval(Jscex.compile("async", function () {
              do {
                  tree.grow();
                  $await(Jscex.Async.sleep(10));
              } while (tree.canGrow());
          }));
  
          var flowAnimate = eval(Jscex.compile("async", function () {
              do {
                  tree.flower(2);
                  $await(Jscex.Async.sleep(10));
              } while (tree.canFlower());
          }));
  
          var moveAnimate = eval(Jscex.compile("async", function () {
              tree.snapshot("p1", 240, 0, 610, 680);
              while (tree.move("p1", 500, 0)) {
                  foot.draw();
                  $await(Jscex.Async.sleep(10));
              }
              foot.draw();
              tree.snapshot("p2", 500, 0, 610, 680);
  
              // 会有闪烁不得意这样做, (＞﹏＜)
               canvas.parent().css("background", "url(" + tree.toDataURL('image/png') + ")");
              // canvas.css("background", "#ffe");
              $await(Jscex.Async.sleep(300));
              canvas.css("background", "none");
          }));
  
          var jumpAnimate = eval(Jscex.compile("async", function () {
              var ctx = tree.ctx;
              while (true) {
                  tree.ctx.clearRect(0, 0, width, height);
                  tree.jump();
                  foot.draw();
                  $await(Jscex.Async.sleep(25));
              }
          }));
  
          var textAnimate = eval(Jscex.compile("async", function () {
              var together = new Date();
              together.setFullYear(2010, 5, 8);
              together.setHours(20);
              together.setMinutes(20);
              together.setSeconds(0);
              together.setMilliseconds(0);
  
              $("#clock-wrapper").fadeIn(500);
              //$("#code").show().typewriter();
              //$("#clock-box").fadeIn(500);
              while (true) {
                  timeElapse(together);
                  $await(Jscex.Async.sleep(1000));
              }
          }));
  
          var runAsync = eval(Jscex.compile("async", function () {
              $await(seedAnimate());
              $await(growAnimate());
              $await(flowAnimate());
              $await(moveAnimate());
  
              textAnimate().start();
  
              $await(jumpAnimate());
          }));
  
          runAsync().start();
      })();
    </script>
  

    <script type="text/javascript">
      var offsetX = $("#loveHeart").width() / 2;
      var offsetY = $("#loveHeart").height() / 2 - 55;
      var nolovetime = new Date();
      nolovetime.setFullYear(2013, 8, 22);
      nolovetime.setHours(14);
      nolovetime.setMinutes(0);
      nolovetime.setSeconds(0);
      nolovetime.setMilliseconds(0);


      // setTimeout(function () {
      //   startHeartAnimation();
      // }, 10e3);

      setInterval(Time, 500);
      adjustCodePosition();

      $("#code").typewriter();
 

      setTimeout(function () {
        window.scrollTo(0, 430)
      }, 6e3);

      setTimeout(function () {
        window.scrollTo(0,840)
      }, 16e3);

      setTimeout(function(){
        $('#container').css('visibility', 'visible')
        move()
        setTimeout(function () {
          window.scrollTo(0,0)
          //$('#mainDiv').fadeOut(3000)
        }, 2e3);
        setTimeout(function() {
          $('#main').css('visibility', 'visible')
        }, 12e3)
      }, 30e3);

      
      
    </script>
  </body>
</html>
